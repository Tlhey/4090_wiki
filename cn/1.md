# 关于linux系统
一些常用的指令(只列出一些最常用的)

## Linux
看显卡/cpu状况 \
nvidia-smi \
htop  # 查看系统资源使用情况 \
top   # 查看进程资源占用 \
 \
查看进程 \
ps aux | grep python \
ps -ef | grep python  # 另一种查看方式 \
 \
正在运行的进程： \
    查看 jobs \
    暂停 cmd/ctrl Z \
    删除 kill %1   或者ctrl C \
    后台运行 cmd & \
    切换到前台 fg %1 \
 \
删除jobs \
kill %i \
删除所有jobs \
jobs -l, 或者 jobs -p \
for job in $(jobs -p); do kill -9 %$job; done \
 \
重启命令行 \
source ~/.bashrc  # 重新加载配置文件 \
 \
文件操作 \
ls -la  # 查看当前目录下所有文件(包括隐藏文件) \
cd /path/to/dir  # 切换目录  \
pwd  # 显示当前目录 

# 网络问题
因为是国内的地址，所以时候会连不上外国网站/下载(pip)很慢...

装很长的环境； nohup micromamba env create -f env.yml (-y) > install_log.txt 2>&1 &

1 换清华源加速下载 2 下常用的旧版本(记得改cuda)
  - pip:
    - -i https://pypi.tuna.tsinghua.edu.cn/simple 
    - --extra-index-url https://download.pytorch.org/whl/cu116


# 环境配置
## Conda
conda和pip的关系:简单的来说可以理解为 （建议在conda环境中先用conda，无法解决的话用pip安装一些conda中没有的lib）

是否在conda环境：   \
anaconda的安装和自动启动，相关脚本在： ~/.bashrc    \
如果输出是空白，则不在conda环境中： echo $CONDA_DEFAULT_ENV     

常用conda命令: \
conda create -n env_name python=3.8  # 创建 \
conda activate env_name  # 激活 \
conda deactivate  # 退出环境 \
conda env list  # 查看所有环境 \
conda list  # 查看当前环境安装的libs 

## Mamba
如果遇到了陈年的老仓库（python<=3.10, torch=1.x，用conda装环境会变得非常困难。Mamba是一个很好的替代。~~~比如我刚刚就成功的装了一个奇怪的环境~~~

mamba下载教程(4090机器):
wget -4 "https://mirrors.tuna.tsinghua.edu.cn/github-release/conda-forge/miniforge/LatestRelease/Miniforge3-24.11.3-2-Linux-x86_64.sh" 
安装即可。

使用方法,和conda基本一致，只是把conda换成micromamba即可。
对于env.yaml文件：
```micromamba env create -f env.yml (-y) > install_log.txt 2>&1 &```
即可成功生成环境。

小技巧1：如果遇到了不兼容，可以挑出比较关键的包（含有torch）的保留版本号，剩下的包都去掉版本号。亲测有效。

小技巧2: 加速生成
1 换清华源加速下载 2 下常用的旧版本(记得改cuda)
  - pip:
    - -i https://pypi.tuna.tsinghua.edu.cn/simple 
    - --extra-index-url https://download.pytorch.org/whl/cu116